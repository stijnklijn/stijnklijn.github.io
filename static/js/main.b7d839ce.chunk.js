(this.webpackJsonpxpensoft=this.webpackJsonpxpensoft||[]).push([[0],{31:function(e,t,n){},32:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(23),c=n.n(a),s=(n(31),n(12)),i=n(15),o=n(18),l=n(26),d=n(3),u=(n(32),n(14)),j=n(4),b=n(19),h=n.n(b),m=n(24),O=n(0);function x(e){var t=e.lang,n=e.inputField,r=e.importTransactions;return Object(O.jsxs)("div",{className:"Import",children:[Object(O.jsx)("h2",{children:"en"===t?"Import":"Importeer"}),Object(O.jsx)("input",{type:"file",id:"import",ref:n}),Object(O.jsx)("button",{id:"import",onClick:r,children:"en"===t?"Import":"Importeer"})]})}function f(e){var t=e.lang,n=e.headers,r=e.showCorrectHeader,a=e.filterFromDate,c=e.setFilterFromDate,s=e.filterToDate,i=e.setFilterToDate,o=e.filterDescription,l=e.setFilterDescription,d=e.setFilterHeaders,u=e.filterFromAmount,j=e.setFilterFromAmount,b=e.filterToAmount,h=e.setFilterToAmount,m=e.resetFilter;return Object(O.jsxs)("div",{className:"Filter",children:[Object(O.jsx)("h2",{children:"Filter"}),Object(O.jsx)("table",{children:Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:Object(O.jsx)("label",{htmlFor:"fromdate",children:"en"===t?"From:  ":"Van: "})}),Object(O.jsx)("td",{children:Object(O.jsx)("input",{type:"date",value:a,id:"fromdate",onChange:function(e){return c(e.target.value)}})}),Object(O.jsx)("td",{children:Object(O.jsx)("label",{htmlFor:"todate",children:"en"===t?"To: ":"Tot: "})}),Object(O.jsx)("td",{children:Object(O.jsx)("input",{type:"date",value:s,id:"todate",onChange:function(e){return i(e.target.value)}})})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:Object(O.jsx)("label",{htmlFor:"description",children:"en"===t?"Description: ":"Omschrijving: "})}),Object(O.jsx)("td",{children:Object(O.jsx)("input",{type:"text",id:"description",value:o,onChange:function(e){return l(e.target.value)}})}),Object(O.jsx)("td",{children:Object(O.jsx)("label",{htmlFor:"headers",children:"en"===t?"Headers: ":"Rubrieken: "})}),Object(O.jsx)("td",{children:Object(O.jsx)("select",{id:"headers",name:"headers",multiple:!0,onChange:function(e){return d(Array.from(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value})))},children:Object.keys(n).sort().map((function(e,t){return Object(O.jsx)("option",{value:e,children:r(e)},t)}))})})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:Object(O.jsx)("label",{htmlFor:"fromamount",children:"en"===t?"From amount: ":"Vanaf bedrag: "})}),Object(O.jsx)("td",{children:Object(O.jsx)("input",{type:"number",id:"fromamount",value:u,onChange:function(e){return j(e.target.value)}})}),Object(O.jsx)("td",{children:Object(O.jsx)("label",{htmlFor:"toamount",children:"en"===t?"To amount: ":"Tot bedrag: "})}),Object(O.jsx)("td",{children:Object(O.jsx)("input",{type:"number",id:"toamount",value:b,onChange:function(e){return h(e.target.value)}})})]})]})}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{onClick:m,children:"Reset filter"})]})}function p(e){var t=e.headers,n=e.showCorrectHeader,r=e.id,a=e.date,c=e.description,s=e.header,i=e.amount,o=e.removeTransaction,l=e.changeTransaction;e.lang;return Object(O.jsxs)("tr",{className:"Transaction",children:[Object(O.jsx)("td",{className:"column-date",children:a.substring(8,10)+"-"+a.substring(5,7)+"-"+a.substring(0,4)}),Object(O.jsx)("td",{className:"column-description",children:Object(O.jsx)("input",{type:"text",value:c,onChange:function(e){l(r,a,e.target.value,s,i)}})}),Object(O.jsx)("td",{className:"column-header",children:Object(O.jsxs)("select",{value:s,onChange:function(e){l(r,a,c,e.target.value,i)},children:[Object(O.jsx)("option",{value:""},"-1"),Object.keys(t).sort().map((function(e,t){return Object(O.jsx)("option",{value:e,children:n(e)},t)}))]})}),Object(O.jsxs)("td",{className:t[s]>0?"column-amount in":"column-amount out",children:["\u20ac ",i.toFixed(2)]}),Object(O.jsx)("td",{className:"column-remove",children:Object(O.jsx)("button",{onClick:function(){o(r)},children:"\xd7"})})]})}function g(e){var t=e.transactions,n=e.headers,r=e.showCorrectHeader,a=e.date,c=e.setDate,s=e.description,i=e.setDescription,o=e.header,l=e.setHeader,d=e.amount,u=e.setAmount,j=e.addTransaction,b=e.removeTransaction,h=e.changeTransaction,m=e.lang,x=e.maxItemsOnPage,f=e.setMaxItemsOnPage,g=0;return Object(O.jsxs)("div",{className:"List",children:[Object(O.jsx)("h2",{children:"en"===m?"List":"Lijst"}),Object(O.jsx)("p",{children:"en"===m?"Showing ".concat(Math.min(x,t.length)," of ").concat(t.length," transactions"):"".concat(Math.min(x,t.length)," van ").concat(t.length," transacties tonend")}),Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"column-date",children:"en"===m?"Date":"Datum"}),Object(O.jsx)("th",{className:"column-description",children:"en"===m?"Description":"Omschrijving"}),Object(O.jsx)("th",{className:"column-header",children:"en"===m?"Header":"Rubriek"}),Object(O.jsx)("th",{className:"column-amount",children:"en"===m?"Amount":"Bedrag"}),Object(O.jsx)("th",{className:"column-remove"})]})}),Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"column-date",children:Object(O.jsx)("input",{type:"date",onChange:function(e){return c(e.target.value)}})}),Object(O.jsx)("td",{className:"column-description",children:Object(O.jsx)("input",{type:"text",value:s,onChange:function(e){return i(e.target.value)}})}),Object(O.jsx)("td",{className:"column-header",children:Object(O.jsxs)("select",{value:o,onChange:function(e){return l(e.target.value)},children:[Object(O.jsx)("option",{value:""},"-1"),Object.keys(n).sort().map((function(e,t){return Object(O.jsx)("option",{value:e,children:r(e)},t)}))]})}),Object(O.jsx)("td",{className:"column-amount",children:Object(O.jsx)("input",{type:"number",value:d,onChange:function(e){return u(Number(e.target.value))}})}),Object(O.jsx)("td",{className:"column-remove",children:Object(O.jsx)("button",{onClick:function(){j(a,s,o,d)},children:"+"})})]}),t.map((function(e,t){return++g<=x&&Object(O.jsx)(p,{headers:n,showCorrectHeader:r,id:e.id,date:e.date,description:e.description,header:e.header,amount:e.amount,removeTransaction:b,changeTransaction:h,lang:m},t)}))]})]}),Object(O.jsx)("button",{className:x<t.length?"show-more-button show":"show-more-button hide",onClick:function(){f((function(e){return e+50}))},children:"en"===m?"Show more":"Toon meer"})]})}function v(e){var t=e.transactions,n=e.headers,a=e.showCorrectHeader,c=e.date,s=e.setDate,i=e.description,o=e.setDescription,l=e.header,u=e.setHeader,j=e.amount,b=e.setAmount,p=e.addTransaction,v=e.removeTransaction,w=e.changeTransaction,N=e.lang,F=e.maxItemsOnPage,H=e.setMaxItemsOnPage,y=Object(r.useRef)(null),T=Object(r.useRef)();T.current=t;var C=Object(r.useState)(),D=Object(d.a)(C,2),S=D[0],k=D[1],I=Object(r.useState)(""),A=Object(d.a)(I,2),E=A[0],P=A[1],U=Object(r.useState)(""),M=Object(d.a)(U,2),R=M[0],Y=M[1],B=Object(r.useState)([]),L=Object(d.a)(B,2),V=L[0],z=L[1],J=Object(r.useState)(0),q=Object(d.a)(J,2),G=q[0],K=q[1],Q=Object(r.useState)(0),W=Object(d.a)(Q,2),X=W[0],Z=W[1];function $(){return($=Object(m.a)(h.a.mark((function e(t){var n,r,a,c,s,i,o,l,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=y.current.files[0],y.current.value=null,e.next=5,n.text();case 5:for(r=e.sent,a=r.split("\n"),c=1;c<a.length-1;c++)s=a[c].split(";"),i="".concat(s[0].substring(1,5),"-").concat(s[0].substring(5,7),"-").concat(s[0].substring(7,9)),o=s[1].substring(1,s[1].length-1),l='"Bij"'===s[5]?"Unallocated income":"Unallocated expenses",d=Number(s[6].substring(1,s[6].length-1).replace(",",".")),p(i,o,l,d);e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert("An error occured while trying to read this file");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return T.current=t,S&&(T.current=T.current.filter((function(e){return e.date>=S}))),E&&(T.current=T.current.filter((function(e){return e.date<=E}))),R&&(T.current=T.current.filter((function(e){return RegExp(R,"gi").test(e.description)}))),V.length&&(T.current=T.current.filter((function(e){return V.includes(e.header)}))),G&&(T.current=T.current.filter((function(e){return e.amount>=G}))),X&&(T.current=T.current.filter((function(e){return e.amount<=X}))),Object(O.jsxs)("div",{className:"Transactions",children:[Object(O.jsx)(x,{lang:N,inputField:y,importTransactions:function(e){return $.apply(this,arguments)}}),Object(O.jsx)("br",{}),Object(O.jsx)("hr",{}),Object(O.jsx)(f,{lang:N,headers:n,showCorrectHeader:a,filterFromDate:S,setFilterFromDate:k,filterToDate:E,setFilterToDate:P,filterDescription:R,setFilterDescription:Y,setFilterHeaders:z,filterFromAmount:G,setFilterFromAmount:K,filterToAmount:X,setFilterToAmount:Z,resetFilter:function(){k(""),P(""),Y(""),z([]),K(0),Z(0)}}),Object(O.jsx)("br",{}),Object(O.jsx)("hr",{}),Object(O.jsx)(g,{transactions:T.current,headers:n,showCorrectHeader:a,date:c,setDate:s,description:i,setDescription:o,header:l,setHeader:u,amount:j,setAmount:b,addTransaction:p,removeTransaction:v,changeTransaction:w,lang:N,maxItemsOnPage:F,setMaxItemsOnPage:H}),Object(O.jsx)("br",{}),Object(O.jsx)("hr",{}),Object(O.jsx)("br",{})]})}function w(e){var t=e.inout,n=e.calculate,r=e.showCorrectHeader,a=e.addHeader,c=e.newHeaderIn,s=e.setNewHeaderIn,i=e.newHeaderOut,o=e.setNewHeaderOut,l=e.removeHeader,u=e.showEmpty,j=e.lang,b=n(),h=Object(d.a)(b,2),m=h[0],x=h[1];function f(e){l(e.target.value)}return Object(O.jsx)("div",{className:"Headertable",children:Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"column-header",children:"en"===j?"Header":"Rubriek"}),Object(O.jsx)("th",{className:"column-amount",children:"en"===j?"Amount":"Bedrag"}),Object(O.jsx)("th",{className:"column-percentage",children:"%"}),Object(O.jsx)("th",{className:"column-remove"})]})}),Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"column-header",children:Object(O.jsx)("input",{type:"text",value:"in"===t?c:i,onChange:function(e){return"in"===t?s(e.target.value):o(e.target.value)}})}),Object(O.jsx)("td",{className:"column-amount"}),Object(O.jsx)("td",{className:"column-percentage"}),Object(O.jsx)("td",{className:"column-remove",children:Object(O.jsx)("button",{onClick:function(){a("in"===t?c:i,"in"===t?1:-1),"in"===t?s(""):o("")},children:"+"})})]}),Object.entries(m).sort().map((function(e,n){return(e[1]>0||u)&&Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"column-header",children:r(e[0])}),Object(O.jsxs)("td",{className:"column-amount "+t,children:["\u20ac ",e[1].toFixed(2)]}),Object(O.jsx)("td",{className:"column-percentage",children:x>0?(e[1]/x*100).toFixed(0):0}),Object(O.jsx)("td",{className:"column-remove",children:Object(O.jsx)("button",{value:e[0],onClick:f,children:"\xd7"})})]},n)})),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"column-header",children:Object(O.jsx)("b",{children:"en"===j?"Total":"Totaal"})}),Object(O.jsx)("td",{className:"column-amount "+t,children:Object(O.jsxs)("b",{children:["\u20ac ",x.toFixed(2)]})}),Object(O.jsx)("td",{className:"column-percentage",children:x>0?100:0}),Object(O.jsx)("th",{className:"column-remove"})]})]})]})})}function N(e){var t=e.transactions,n=e.headers,r=e.showCorrectHeader,a=e.fromDate,c=e.setFromDate,i=e.toDate,o=e.setToDate,l=e.addHeader,d=e.newHeaderIn,u=e.setNewHeaderIn,j=e.newHeaderOut,b=e.setNewHeaderOut,h=e.removeHeader,m=e.showEmpty,x=e.setShowEmpty,f=e.lang;function p(){var e=t.filter((function(e){return e.date>=a&&e.date<=i}));return e.length?e.map((function(e){return e.amount*n[e.header]})).reduce((function(e,t){return e+t})):0}return Object(O.jsxs)("div",{className:"Overview",children:[Object(O.jsx)("h2",{children:"en"===f?"Period":"Periode"}),Object(O.jsxs)("label",{htmlFor:"from",children:["en"===f?"From":"Van",":"]}),Object(O.jsx)("input",{type:"date",id:"from",value:a,onChange:function(e){return c(e.target.value)}}),Object(O.jsxs)("label",{htmlFor:"to",children:["en"===f?"To":"Tot",":"]}),Object(O.jsx)("input",{type:"date",id:"to",value:i,onChange:function(e){return o(e.target.value)}}),Object(O.jsx)("input",{type:"checkbox",id:"empty",value:m,checked:m,onChange:function(e){console.log(e.target.value),x("true"!==e.target.value)}}),Object(O.jsx)("label",{htmlFor:"empty",children:"en"===f?"Show empty headers":"Toon lege rubrieken"}),Object(O.jsx)("br",{}),Object(O.jsx)("hr",{}),Object(O.jsx)("h2",{children:"en"===f?"Net result":"Netto resultaat"}),Object(O.jsxs)("h3",{className:p()<0?"neg":"pos",children:["\u20ac ",p().toFixed(2)]}),Object(O.jsx)("br",{}),Object(O.jsx)("hr",{}),Object(O.jsx)("h2",{children:"en"===f?"Income":"inkomsten"}),Object(O.jsx)(w,{inout:"in",calculate:function(){var e=0,r={};for(var c in n)1===n[c]&&(r[c]=0);var o=t.filter((function(e){return e.date>=a&&e.date<=i}));if(!o.length)return[r,0];var l,d=Object(s.a)(o);try{for(d.s();!(l=d.n()).done;){var u=l.value;u.header in r&&(r[u.header]+=u.amount,e+=u.amount)}}catch(j){d.e(j)}finally{d.f()}return[r,e]},showCorrectHeader:r,addHeader:l,newHeaderIn:d,setNewHeaderIn:u,removeHeader:h,showEmpty:m,lang:f}),Object(O.jsx)("br",{}),Object(O.jsx)("hr",{}),Object(O.jsx)("h2",{children:"en"===f?"Expenses":"Uitgaven"}),Object(O.jsx)(w,{inout:"out",calculate:function(){var e=0,r={};for(var c in n)-1===n[c]&&(r[c]=0);var o=t.filter((function(e){return e.date>=a&&e.date<=i}));if(!o.length)return[r,0];var l,d=Object(s.a)(o);try{for(d.s();!(l=d.n()).done;){var u=l.value;u.header in r&&(r[u.header]+=u.amount,e+=u.amount)}}catch(j){d.e(j)}finally{d.f()}return[r,e]},showCorrectHeader:r,addHeader:l,newHeaderOut:j,setNewHeaderOut:b,removeHeader:h,showEmpty:m,lang:f}),Object(O.jsx)("br",{}),Object(O.jsx)("hr",{}),Object(O.jsx)("br",{})]})}var F=function(){var e,t=Object(r.useState)([]),n=Object(d.a)(t,2),a=n[0],c=n[1],b=Object(r.useState)({"Unallocated income":1,"Unallocated expenses":-1}),h=Object(d.a)(b,2),m=h[0],x=h[1],f=Object(r.useState)(null),p=Object(d.a)(f,2),g=p[0],w=p[1],F=Object(r.useState)(""),H=Object(d.a)(F,2),y=H[0],T=H[1],C=Object(r.useState)(""),D=Object(d.a)(C,2),S=D[0],k=D[1],I=Object(r.useState)(""),A=Object(d.a)(I,2),E=A[0],P=A[1],U=Object(r.useState)(""),M=Object(d.a)(U,2),R=M[0],Y=M[1],B=Object(r.useState)(""),L=Object(d.a)(B,2),V=L[0],z=L[1],J=Object(r.useState)(50),q=Object(d.a)(J,2),G=q[0],K=q[1],Q=[31,(e=(new Date).getFullYear(),e%400===0||e%4===0&&e%100!==0?29:28),31,30,31,30,31,31,30,31,30,31],W=Object(r.useState)("".concat((new Date).getFullYear(),"-").concat(String((new Date).getMonth()+1).padStart(2,"0"),"-01")),X=Object(d.a)(W,2),Z=X[0],$=X[1],_=Object(r.useState)("".concat((new Date).getFullYear(),"-").concat(String((new Date).getMonth()+1).padStart(2,"0"),"-").concat(Q[(new Date).getMonth()])),ee=Object(d.a)(_,2),te=ee[0],ne=ee[1],re=Object(r.useState)("en"),ae=Object(d.a)(re,2),ce=ae[0],se=ae[1],ie=Object(r.useState)(!0),oe=Object(d.a)(ie,2),le=oe[0],de=oe[1];function ue(e){se(e.target.value)}function je(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Date.now();e&&t&&n&&!(r<=0)?(c((function(c){return[{id:a,date:e,description:t,header:n,amount:r}].concat(Object(l.a)(c)).sort((function(e,t){return e.date<t.date?1:e.date>t.date?-1:t.id-e.id}))})),T(""),k(""),P("")):alert("en"===ce?"You must specify all fields and a minumum amount of 0.01":"Alle velden dienen ingevuld te worden en het minimumbedrag is 0.01")}function be(e){return"nl"===ce&&"Unallocated income"===e?"Ongerubriceerde inkomsten":"nl"===ce&&"Unallocated expenses"===e?"Ongerubriceerde uitgaven":e}return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsxs)("nav",{children:[Object(O.jsx)(u.b,{to:"/transactions",activeClassName:"active",children:"en"===ce?"Transactions":"Transacties"}),Object(O.jsx)(u.b,{to:"/overview",activeClassName:"active",children:"en"===ce?"Overview":"Overzicht"}),Object(O.jsxs)("div",{className:"langbar",children:[Object(O.jsx)("input",{type:"radio",id:"en",name:"lang",value:"en",checked:"en"===ce,onChange:ue}),Object(O.jsx)("label",{htmlFor:"en",children:"English"}),Object(O.jsx)("input",{type:"radio",id:"nl",name:"lang",value:"nl",checked:"en"!==ce,onChange:ue}),Object(O.jsx)("label",{htmlFor:"nl",children:"Nederlands"})]})]}),Object(O.jsx)("main",{children:Object(O.jsxs)(j.d,{children:[Object(O.jsx)(j.b,{exact:!0,path:"/",children:Object(O.jsx)(j.a,{to:"/transactions"})}),Object(O.jsx)(j.b,{path:"/transactions",children:Object(O.jsx)(v,{transactions:a,headers:m,showCorrectHeader:be,date:g,setDate:w,description:y,setDescription:T,header:S,setHeader:k,amount:E,setAmount:P,addTransaction:je,removeTransaction:function(e){c((function(t){return t.filter((function(t){return t.id!==e}))}))},changeTransaction:function(e,t,n,r,a){c((function(t){return t.filter((function(t){return t.id!==e}))})),je(t,n,r,a,e)},lang:ce,maxItemsOnPage:G,setMaxItemsOnPage:K})}),Object(O.jsx)(j.b,{path:"/overview",children:Object(O.jsx)(N,{transactions:a,headers:m,showCorrectHeader:be,fromDate:Z,setFromDate:$,toDate:te,setToDate:ne,addHeader:function(e,t){e&&((e=e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase())in m?alert("en"===ce?"Header already exists":"Rubriek bestaat al"):x((function(n){return Object(o.a)(Object(o.a)({},n),{},Object(i.a)({},e,t))})))},newHeaderIn:R,setNewHeaderIn:Y,newHeaderOut:V,setNewHeaderOut:z,removeHeader:function(e){var t=Object.assign({},m);if("Unallocated income"!==e&&"Unallocated expenses"!==e){var n,r=Object(s.a)(a);try{for(r.s();!(n=r.n()).done;){if(n.value.header===e)return void alert("en"===ce?"There are still transactions with that header":"Er zijn nog transacties in die rubriek")}}catch(c){r.e(c)}finally{r.f()}delete t[e],x(t)}else alert("en"===ce?"You cannot delete default headers":"Standaardrubrieken kunnen niet verwijderd worden")},showEmpty:le,setShowEmpty:de,lang:ce})})]})})]})};c.a.render(Object(O.jsx)(u.a,{children:Object(O.jsx)(F,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.b7d839ce.chunk.js.map