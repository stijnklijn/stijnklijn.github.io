(this.webpackJsonpactilyzer=this.webpackJsonpactilyzer||[]).push([[0],{14:function(t,e,n){},16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var r=n(2),a=n.n(r),c=n(8),i=n.n(c),s=(n(14),n(1)),o=n.n(s),d=n(9),u=n(3),l=n(5),h=(n(16),n(0));function j(t){var e=t.activities,n=t.getActivities,a=t.sortBy,c=["date","name","dist","time","elev","kudos","comm","speedAvg","speedMax","powerAvg","powerWghtd","powerMax","HRAvg","HRMax"],i=Object(r.useState)("date"),s=Object(l.a)(i,2),o=s[0],d=s[1],u=Object(r.useState)(!0),j=Object(l.a)(u,2),p=j[0],x=j[1];function b(t){var e=Math.floor(t/3600),n=t%3600,r=Math.floor(n/60),a=n%60;return e.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")}return Object(h.jsxs)("div",{className:"Actiranker",children:[Object(h.jsxs)("div",{className:"Inputarea",children:[Object(h.jsx)("button",{onClick:n,children:"Import activities"}),Object(h.jsx)("label",{htmlFor:"sortby",children:"Sort by: "}),Object(h.jsx)("select",{id:"sortby",name:"variables",onChange:function(t){d(t.target.value)},children:c.map((function(t){return Object(h.jsx)("option",{value:t,children:t},t)}))}),Object(h.jsx)("input",{type:"radio",name:"order",id:"descending",onChange:function(t){x(!0)}}),Object(h.jsx)("label",{htmlFor:"descending",children:"Descending"}),Object(h.jsx)("input",{type:"radio",name:"order",id:"ascending",onChange:function(t){x(!1)}}),Object(h.jsx)("label",{htmlFor:"ascending",children:"Ascending"}),Object(h.jsx)("button",{onClick:function(){a(o,p)},children:"Sort"})]}),Object(h.jsxs)("table",{children:[Object(h.jsx)("thead",{children:Object(h.jsx)("tr",{children:c.map((function(t){return Object(h.jsx)("td",{children:t},t)}))})}),Object(h.jsx)("tbody",{children:e.map((function(t){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:t.date.substring(8,10)+"-"+t.date.substring(5,7)+"-"+t.date.substring(0,4)}),Object(h.jsx)("td",{className:"left",children:t.name}),Object(h.jsx)("td",{children:(t.dist/1e3).toFixed(0)}),Object(h.jsx)("td",{children:b(t.time)}),Object(h.jsx)("td",{children:t.elev.toFixed(0)}),Object(h.jsx)("td",{children:t.kudos}),Object(h.jsx)("td",{children:t.comm}),Object(h.jsx)("td",{children:(3.6*t.speedAvg).toFixed(2)}),Object(h.jsx)("td",{children:(3.6*t.speedMax).toFixed(2)}),Object(h.jsx)("td",{children:t.powerAvg?t.powerAvg.toFixed(0):"-"}),Object(h.jsx)("td",{children:t.powerWghtd?t.powerWghtd.toFixed(0):"-"}),Object(h.jsx)("td",{children:t.powerMax?t.powerMax.toFixed(0):"-"}),Object(h.jsx)("td",{children:t.HRAvg?t.HRAvg.toFixed(0):"-"}),Object(h.jsx)("td",{children:t.HRMax?t.HRMax.toFixed(0):"-"})]},t.id)}))})]})]})}var p,x="67032",b={getAuthorizationCode:function(){var t=window.location.href.match(/code=([^&]*)/),e=window.location.href.match(/scope=([^&]*)/);if(t&&e){var n=t[1];return e[1].split(","),n}window.location="https://www.strava.com/oauth/authorize?client_id=".concat(x,"&response_type=code&redirect_uri=").concat("http://localhost:3000","&approval_prompt=force&scope=read,read_all,profile:read_all,activity:read,activity:read_all")},getAccessToken:function(){var t=this;return Object(u.a)(o.a.mark((function e(){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return",p);case 2:return n=t.getAuthorizationCode(),e.next=5,fetch("https://www.strava.com/oauth/token?client_id=".concat(x,"&client_secret=").concat("18fb4c9185552d4ba2fedd31e4deabe5209360a2","&code=").concat(n,"&grant_type=authorization_code"),{method:"POST"});case 5:return r=e.sent,e.next=8,r.json();case 8:return a=e.sent,p=a.access_token,e.abrupt("return",p);case 11:case"end":return e.stop()}}),e)})))()},getNumberOfActivities:function(){var t=this;return Object(u.a)(o.a.mark((function e(){var n,r,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAccessToken();case 2:return n=e.sent,e.next=5,fetch("https://www.strava.com/api/v3/athlete",{headers:{Authorization:"Bearer ".concat(n)}});case 5:return r=e.sent,e.next=8,r.json();case 8:return a=e.sent,c=a.id,e.next=12,fetch("https://www.strava.com/api/v3/athletes/".concat(c,"/stats"),{headers:{Authorization:"Bearer ".concat(n)}});case 12:return r=e.sent,e.next=15,r.json();case 15:return a=e.sent,e.abrupt("return",a.all_ride_totals.count+a.all_run_totals.count+a.all_swim_totals.count);case 17:case"end":return e.stop()}}),e)})))()},getActivities:function(t){var e=this;return Object(u.a)(o.a.mark((function n(){var r,a,c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getAccessToken();case 2:return r=n.sent,n.next=5,fetch("https://www.strava.com/api/v3/athlete/activities?page=".concat(t),{headers:{Authorization:"Bearer ".concat(r)}});case 5:return a=n.sent,n.next=8,a.json();case 8:return c=n.sent,n.abrupt("return",c.map((function(t){return{id:t.id,date:t.start_date_local,name:t.name,dist:t.distance,time:t.moving_time,elev:t.total_elevation_gain,kudos:t.kudos_count,comm:t.comment_count,speedAvg:t.average_speed,speedMax:t.max_speed,powerAvg:t.average_watts||0,powerWghtd:t.weighted_average_watts||0,powerMax:t.max_watts||0,HRAvg:t.average_heartrate||0,HRMax:t.max_heartrate||0}})));case 10:case"end":return n.stop()}}),n)})))()}};var v=function(){var t=Object(r.useState)([]),e=Object(l.a)(t,2),n=e[0],a=e[1];function c(){return(c=Object(u.a)(o.a.mark((function t(){var e,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getNumberOfActivities();case 2:for(t.sent,e=[],n=1;n<3;n++)e.push(b.getActivities(n));return t.next=7,Promise.all(e);case 7:r=t.sent,a(r.flat());case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(j,{activities:n,getActivities:function(){return c.apply(this,arguments)},sortBy:function(t,e){a((function(n){return Object(d.a)(n.sort((function(n,r){return n[t]>r[t]?e?-1:1:n[t]<r[t]?e?1:-1:0})))}))}})})},f=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),c(t),i(t)}))};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root")),f()}},[[18,1,2]]]);
//# sourceMappingURL=main.17b163c7.chunk.js.map