(this.webpackJsonpxpensoft=this.webpackJsonpxpensoft||[]).push([[0],{31:function(e,t,n){},32:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(23),r=n.n(c),s=(n(31),n(12)),i=n(15),o=n(18),d=n(26),l=n(5),j=(n(32),n(14)),u=n(2),h=n(19),b=n.n(h),m=n(24),O=n(0);function x(e){var t=e.headers,n=e.id,a=e.date,c=e.description,r=e.header,s=e.amount,i=e.removeEntry,o=e.changeEntry;return Object(O.jsxs)("tr",{className:"Entry",children:[Object(O.jsx)("td",{className:"column-date",children:a.substring(8,10)+"-"+a.substring(5,7)+"-"+a.substring(0,4)}),Object(O.jsx)("td",{className:"column-description",children:Object(O.jsx)("input",{type:"text",value:c,onChange:function(e){o(n,a,e.target.value,r,s)}})}),Object(O.jsx)("td",{className:"column-header",children:Object(O.jsxs)("select",{value:r,onChange:function(e){o(n,a,c,e.target.value,s)},children:[Object(O.jsx)("option",{value:""},"-1"),Object.keys(t).sort().map((function(e,t){return Object(O.jsx)("option",{value:e,children:e},t)}))]})}),Object(O.jsxs)("td",{className:t[r]>0?"column-amount in":"column-amount out",children:["\u20ac ",s.toFixed(2)]}),Object(O.jsx)("td",{className:"column-remove",children:Object(O.jsx)("button",{onClick:function(){i(n)},children:"\xd7"})})]})}function p(e){var t=e.entries,n=e.headers,a=e.date,c=e.setDate,r=e.description,s=e.setDescription,i=e.header,o=e.setHeader,d=e.amount,l=e.setAmount,j=e.addEntry,u=e.removeEntry,h=e.changeEntry;return Object(O.jsx)("div",{className:"EntryList",children:Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"column-date",children:"Date"}),Object(O.jsx)("th",{className:"column-description",children:"Description"}),Object(O.jsx)("th",{className:"column-header",children:"Header"}),Object(O.jsx)("th",{className:"column-amount",children:"Amount"}),Object(O.jsx)("th",{className:"column-remove"})]})}),Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"column-date",children:Object(O.jsx)("input",{type:"date",onChange:function(e){return c(e.target.value)}})}),Object(O.jsx)("td",{className:"column-description",children:Object(O.jsx)("input",{type:"text",value:r,onChange:function(e){return s(e.target.value)}})}),Object(O.jsx)("td",{className:"column-header",children:Object(O.jsxs)("select",{value:i,onChange:function(e){return o(e.target.value)},children:[Object(O.jsx)("option",{value:""},"-1"),Object.keys(n).sort().map((function(e,t){return Object(O.jsx)("option",{value:e,children:e},t)}))]})}),Object(O.jsx)("td",{className:"column-amount",children:Object(O.jsx)("input",{type:"number",value:d,onChange:function(e){return l(Number(e.target.value))}})}),Object(O.jsx)("td",{className:"column-remove",children:Object(O.jsx)("button",{onClick:function(){j(a,r,i,d)},children:"+"})})]}),t.map((function(e,t){return Object(O.jsx)(x,{headers:n,id:e.id,date:e.date,description:e.description,header:e.header,amount:e.amount,removeEntry:u,changeEntry:h},t)}))]})]})})}function f(e){var t=e.entries,n=e.headers,a=e.date,c=e.setDate,r=e.description,s=e.setDescription,i=e.header,o=e.setHeader,d=e.amount,l=e.setAmount,j=e.addEntry,u=e.removeEntry,h=e.changeEntry;function x(){return(x=Object(m.a)(b.a.mark((function e(t){var n,a,c,r,s,i,o,d,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],e.next=3,n.text();case 3:for(a=e.sent,c=a.split("\n"),r=1;r<c.length-1;r++)s=c[r].split(";"),i="".concat(s[0].substring(1,5),"-").concat(s[0].substring(5,7),"-").concat(s[0].substring(7,9)),o=s[1].substring(1,s[1].length-1),d='"Bij"'===s[5]?"Unallocated income":"Unallocated expenses",l=Number(s[6].substring(1,s[6].length-1).replace(",",".")),j(i,o,d,l);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(O.jsxs)("div",{className:"Entries",children:[Object(O.jsx)("h2",{children:"Import entries"}),Object(O.jsx)("input",{type:"file",onChange:function(e){return x.apply(this,arguments)}}),Object(O.jsx)("hr",{}),Object(O.jsx)("h2",{children:"Entries"}),Object(O.jsx)(p,{entries:t,headers:n,date:a,setDate:c,description:r,setDescription:s,header:i,setHeader:o,amount:d,setAmount:l,addEntry:j,removeEntry:u,changeEntry:h}),Object(O.jsx)("hr",{}),Object(O.jsx)("br",{})]})}function v(e){var t=e.inout,n=e.calculate,a=e.addHeader,c=e.newHeaderIn,r=e.setNewHeaderIn,s=e.newHeaderOut,i=e.setNewHeaderOut,o=e.removeHeader,d=e.showEmpty,j=n(),u=Object(l.a)(j,2),h=u[0],b=u[1];function m(e){o(e.target.value)}return Object(O.jsx)("div",{className:"Inout",children:Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"column-header",children:"Header"}),Object(O.jsx)("th",{className:"column-amount",children:"Amount"}),Object(O.jsx)("th",{className:"column-percentage",children:"%"}),Object(O.jsx)("th",{className:"column-remove"})]})}),Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"column-header",children:Object(O.jsx)("input",{type:"text",value:"in"===t?c:s,onChange:function(e){return"in"===t?r(e.target.value):i(e.target.value)}})}),Object(O.jsx)("td",{className:"column-amount"}),Object(O.jsx)("td",{className:"column-percentage"}),Object(O.jsx)("td",{className:"column-remove",children:Object(O.jsx)("button",{onClick:function(){a("in"===t?c:s,"in"===t?1:-1),"in"===t?r(""):i("")},children:"+"})})]}),Object.entries(h).sort().map((function(e,n){return(e[1]>0||d)&&Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"column-header",children:e[0]}),Object(O.jsxs)("td",{className:"column-amount "+t,children:["\u20ac ",e[1].toFixed(2)]}),Object(O.jsx)("td",{className:"column-percentage",children:b>0?(e[1]/b*100).toFixed(0):0}),Object(O.jsx)("td",{className:"column-remove",children:Object(O.jsx)("button",{value:e[0],onClick:m,children:"\xd7"})})]},n)})),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"column-header",children:Object(O.jsx)("b",{children:"Total"})}),Object(O.jsx)("td",{className:"column-amount "+t,children:Object(O.jsxs)("b",{children:["\u20ac ",b.toFixed(2)]})}),Object(O.jsx)("td",{className:"column-percentage",children:b>0?100:0}),Object(O.jsx)("th",{className:"column-remove"})]})]})]})})}function g(e){var t=e.entries,n=e.headers,a=e.fromDate,c=e.setFromDate,r=e.toDate,i=e.setToDate,o=e.addHeader,d=e.newHeaderIn,l=e.setNewHeaderIn,j=e.newHeaderOut,u=e.setNewHeaderOut,h=e.removeHeader,b=e.showEmpty,m=e.setShowEmpty;function x(){var e=t.filter((function(e){return e.date>=a&&e.date<=r}));return e.length?e.map((function(e){return e.amount*n[e.header]})).reduce((function(e,t){return e+t})):0}return Object(O.jsxs)("div",{className:"Analysis",children:[Object(O.jsx)("h2",{children:"Select period"}),Object(O.jsx)("label",{htmlFor:"from",children:"From:"}),Object(O.jsx)("input",{type:"date",id:"from",value:a,onChange:function(e){return c(e.target.value)}}),Object(O.jsx)("label",{htmlFor:"to",children:"To:"}),Object(O.jsx)("input",{type:"date",id:"to",value:r,onChange:function(e){return i(e.target.value)}}),Object(O.jsx)("label",{htmlFor:"empty",children:"Show empty headers: "}),Object(O.jsx)("input",{type:"checkbox",id:"empty",defaultChecked:b,onChange:function(e){m(!b)}}),Object(O.jsx)("hr",{}),Object(O.jsx)("h2",{children:"Net result"}),Object(O.jsxs)("h3",{className:x()<0?"neg":"pos",children:["\u20ac ",x().toFixed(2)]}),Object(O.jsx)("hr",{}),Object(O.jsx)("h2",{children:"Income"}),Object(O.jsx)(v,{inout:"in",calculate:function(){var e=0,c={};for(var i in n)1===n[i]&&(c[i]=0);var o=t.filter((function(e){return e.date>=a&&e.date<=r}));if(!o.length)return[c,0];var d,l=Object(s.a)(o);try{for(l.s();!(d=l.n()).done;){var j=d.value;j.header in c&&(c[j.header]+=j.amount,e+=j.amount)}}catch(u){l.e(u)}finally{l.f()}return[c,e]},addHeader:o,newHeaderIn:d,setNewHeaderIn:l,removeHeader:h,showEmpty:b}),Object(O.jsx)("hr",{}),Object(O.jsx)("h2",{children:"Expenses"}),Object(O.jsx)(v,{inout:"out",calculate:function(){var e=0,c={};for(var i in n)-1===n[i]&&(c[i]=0);var o=t.filter((function(e){return e.date>=a&&e.date<=r}));if(!o.length)return[c,0];var d,l=Object(s.a)(o);try{for(l.s();!(d=l.n()).done;){var j=d.value;j.header in c&&(c[j.header]+=j.amount,e+=j.amount)}}catch(u){l.e(u)}finally{l.f()}return[c,e]},addHeader:o,newHeaderOut:j,setNewHeaderOut:u,removeHeader:h,showEmpty:b}),Object(O.jsx)("hr",{}),Object(O.jsx)("br",{})]})}var y=function(){var e,t=Object(a.useState)([]),n=Object(l.a)(t,2),c=n[0],r=n[1],h=Object(a.useState)({"Unallocated income":1,"Unallocated expenses":-1}),b=Object(l.a)(h,2),m=b[0],x=b[1],p=Object(a.useState)(null),v=Object(l.a)(p,2),y=v[0],N=v[1],w=Object(a.useState)(""),H=Object(l.a)(w,2),E=H[0],D=H[1],C=Object(a.useState)(""),S=Object(l.a)(C,2),F=S[0],I=S[1],k=Object(a.useState)(""),A=Object(l.a)(k,2),U=A[0],T=A[1],Y=Object(a.useState)(""),M=Object(l.a)(Y,2),B=M[0],J=M[1],L=Object(a.useState)(""),q=Object(l.a)(L,2),z=q[0],G=q[1],K=[31,(e=(new Date).getFullYear(),e%400===0||e%4===0&&e%100!==0?29:28),31,30,31,30,31,31,30,31,30,31],P=Object(a.useState)("".concat((new Date).getFullYear(),"-").concat(String((new Date).getMonth()+1).padStart(2,"0"),"-01")),Q=Object(l.a)(P,2),R=Q[0],V=Q[1],W=Object(a.useState)("".concat((new Date).getFullYear(),"-").concat(String((new Date).getMonth()+1).padStart(2,"0"),"-").concat(K[(new Date).getMonth()])),X=Object(l.a)(W,2),Z=X[0],$=X[1],_=Object(a.useState)(!0),ee=Object(l.a)(_,2),te=ee[0],ne=ee[1];function ae(e,t,n,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Date.now();e&&t&&n&&!(a<=0)&&(r((function(r){return[{id:c,date:e,description:t,header:n,amount:a}].concat(Object(d.a)(r)).sort((function(e,t){return e.date<t.date?1:e.date>t.date?-1:t.id-e.id}))})),D(""),I(""),T(""))}return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsxs)("nav",{children:[Object(O.jsx)(j.b,{to:"/entries",activeClassName:"active",children:"Entries"}),Object(O.jsx)(j.b,{to:"/analysis",activeClassName:"active",children:"Analysis"})]}),Object(O.jsx)("main",{children:Object(O.jsxs)(u.d,{children:[Object(O.jsx)(u.b,{exact:!0,path:"/",children:Object(O.jsx)(u.a,{to:"/entries"})}),Object(O.jsx)(u.b,{path:"/entries",children:Object(O.jsx)(f,{entries:c,headers:m,date:y,setDate:N,description:E,setDescription:D,header:F,setHeader:I,amount:U,setAmount:T,addEntry:ae,removeEntry:function(e){r((function(t){return t.filter((function(t){return t.id!==e}))}))},changeEntry:function(e,t,n,a,c){r((function(t){return t.filter((function(t){return t.id!==e}))})),ae(t,n,a,c,e)}})}),Object(O.jsx)(u.b,{path:"/analysis",children:Object(O.jsx)(g,{entries:c,headers:m,fromDate:R,setFromDate:V,toDate:Z,setToDate:$,addHeader:function(e,t){e&&((e=e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase())in m?alert("Header already exists"):x((function(n){return Object(o.a)(Object(o.a)({},n),{},Object(i.a)({},e,t))})))},newHeaderIn:B,setNewHeaderIn:J,newHeaderOut:z,setNewHeaderOut:G,removeHeader:function(e){var t=Object.assign({},m);if("Unallocated income"!==e&&"Unallocated expenses"!==e){var n,a=Object(s.a)(c);try{for(a.s();!(n=a.n()).done;){if(n.value.header===e)return void alert("There are still entries with that header")}}catch(r){a.e(r)}finally{a.f()}delete t[e],x(t)}else alert("You cannot delete default headers")},showEmpty:te,setShowEmpty:ne})})]})})]})};r.a.render(Object(O.jsx)(j.a,{children:Object(O.jsx)(y,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.8a9432ba.chunk.js.map